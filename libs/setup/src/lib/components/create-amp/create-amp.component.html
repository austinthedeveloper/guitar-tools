<div class="container mt-4">
  <div class="card p-4">
    <h2 class="text-center mb-3">Create a New Amp</h2>
    <form [formGroup]="ampForm" (ngSubmit)="submit()">
      <div class="mb-3">
        <label for="name" class="form-label">Amp Name</label>
        <input
          id="name"
          formControlName="name"
          type="text"
          class="form-control"
          required
        />
      </div>
      <div class="mb-3">
        <label for="name" class="form-label">Amp Brand</label>
        <input
          id="brand"
          formControlName="brand"
          type="text"
          class="form-control"
        />
      </div>

      <h3>Controls</h3>
      <div formArrayName="controls">
        <div
          *ngFor="let control of controls.controls; let i = index"
          class="mb-2"
          [formGroup]="getControl(i)"
        >
          <label class="form-label">Control Name</label>
          <select formControlName="name" class="form-select">
            <option value="">-- Select Control --</option>
            <option
              *ngFor="let controlOption of controlOptions"
              [value]="controlOption.name"
            >
              {{ controlOption.name }}
            </option>
          </select>

          <label class="form-label">Control Type</label>
          <select formControlName="type" class="form-select">
            <option value="">-- Select Knob --</option>
            <option
              *ngFor="let controlType of controlTypes"
              [value]="controlType.name"
            >
              {{ controlType.name }}
            </option>
          </select>

          <button
            type="button"
            class="btn btn-danger"
            (click)="removeControl(i)"
          >
            Remove
          </button>
        </div>
      </div>
      <button type="button" class="btn btn-primary mb-3" (click)="addControl()">
        Add Control
      </button>
      <button
        type="submit"
        class="btn btn-success w-100"
        [disabled]="ampForm.invalid"
      >
        Create Amp
      </button>
    </form>
  </div>
</div>
