<section class="page quiz-page">
  <header class="page-header">
    <div class="page-header__meta">
      <span class="page-header__eyebrow">Practice Suite</span>
      <h1 class="page-header__title">Quiz</h1>
      <p class="page-header__subtitle">
        Rotate through quick drills to sharpen your fretboard recall. Pick the quiz types you want and let the app mix up
        the challenges.
      </p>
    </div>
  </header>

  <div class="page-body quiz-page__body">
    <div class="page-toolbar quiz-page__toolbar">
      <mat-form-field
        appearance="outline"
        color="primary"
        class="page-toolbar__field quiz-page__select"
      >
        <mat-label>Quiz Types</mat-label>
        <mat-select
          [formControl]="activeQuizzes"
          (selectionChange)="randomizeQuiz()"
          multiple
        >
          <mat-select-trigger>
            {{ activeQuizzes.value?.length || 0 }} Types
          </mat-select-trigger>
          @for (item of quizItems; track item) {
          <mat-option [value]="item.value">{{ item.key }}</mat-option>
          }
        </mat-select>
      </mat-form-field>

      <div class="quiz-page__toolbar-actions">
        <button
          type="button"
          class="pill-button pill-button--ghost"
          (click)="onClear()"
        >
          Clear
        </button>
        <button
          type="button"
          class="pill-button pill-button--primary"
          (click)="onReset()"
        >
          Reset
        </button>
      </div>
    </div>

    <guitar-quiz-totals
      class="quiz-page__totals"
      [correct]="correct.value"
      [incorrect]="incorrect.value"
    ></guitar-quiz-totals>

    <guitar-card class="quiz-page__card" [header]="activeType.value">
      @switch (activeValue.value) { @case ('sorting') {

      <guitar-mode-ordering-quiz
        (correct)="onCorrect()"
        (incorrect)="onIncorrect()"
      ></guitar-mode-ordering-quiz>

      } @case ('relativeMinor') {

      <guitar-relative-minor-quiz
        (correct)="onCorrect()"
        (incorrect)="onIncorrect()"
      ></guitar-relative-minor-quiz>

      } @case ('relativeMajor') {

      <guitar-relative-major-quiz
        (correct)="onCorrect()"
        (incorrect)="onIncorrect()"
      ></guitar-relative-major-quiz>

      } @case ('modeName') {

      <guitar-mode-name-quiz
        (correct)="onCorrect()"
        (incorrect)="onIncorrect()"
      ></guitar-mode-name-quiz>

      } @case ('mode') {

      <guitar-mode-quiz
        (correct)="onCorrect()"
        (incorrect)="onIncorrect()"
      ></guitar-mode-quiz>

      } @case ('chord') {

      <guitar-chord-quiz
        [chords]="chords"
        (correct)="onCorrect()"
        (incorrect)="onIncorrect()"
      ></guitar-chord-quiz>

      } @case ('triads') {

      <guitar-chord-quiz
        [chords]="triads"
        (correct)="onCorrect()"
        (incorrect)="onIncorrect()"
      ></guitar-chord-quiz>

      } @case ('triadsMinor') {

      <guitar-chord-quiz
        [chords]="triadsMinor"
        (correct)="onCorrect()"
        (incorrect)="onIncorrect()"
      ></guitar-chord-quiz>

      } @case ('triadsAugmented') {

      <guitar-chord-quiz
        [chords]="triadsAugmented"
        (correct)="onCorrect()"
        (incorrect)="onIncorrect()"
      ></guitar-chord-quiz>

      } @case ('triadsDiminished') {

      <guitar-chord-quiz
        [chords]="triadsDiminished"
        (correct)="onCorrect()"
        (incorrect)="onIncorrect()"
      ></guitar-chord-quiz>

      } @case ('specificTriads') {

      <guitar-specific-note
        [chords]="triads"
        (correct)="onCorrect()"
        (incorrect)="onIncorrect()"
      ></guitar-specific-note>

      } @case ('scale') {

      <guitar-scale-quiz
        [tuning]="tuning$ | async"
        [tuningChart]="tuningChart$ | async"
        [frets]="frets$ | async"
        (correct)="onCorrect()"
        (incorrect)="onIncorrect()"
      ></guitar-scale-quiz>

      } @case ('triadsNoteOrder') {

      <guitar-triad-note-order
        [chords]="triads"
        (correct)="onCorrect()"
        (incorrect)="onIncorrect()"
      ></guitar-triad-note-order>

      } }
    </guitar-card>
  </div>
</section>
